{
  "meta": {
    "project": "Clinic Appointment and Queue Management System (CAQM)",
    "date": "2026-01-09",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "CAQM is a Django-based web application designed to streamline clinic operations by managing patient appointments, doctor schedules, waiting queues, and digital check-ins. It enhances patient experience by enabling online appointment booking, real-time queue tracking, notifications, and feedback, while empowering clinic staff with administrative tools for appointment management, emergency handling, and performance monitoring.",
  "core_goals": [
    "Enable patients to book, modify, view, and cancel appointments efficiently online, reducing in-person visits and saving time.",
    "Provide real-time queue tracking and digital check-in to manage patient flow, reduce crowding, and improve clinic efficiency.",
    "Support clinic staff roles (doctors, nurses, admins) with tools for scheduling, consultation management, notifications, and emergencies handling.",
    "Ensure secure, scalable, and reliable system performance with user-friendly interfaces for all stakeholders.",
    "Facilitate patient feedback collection to improve clinic services and doctor performance.",
    "Automate processes such as QR code generation for check-ins, appointment reminders, and notifications to enhance communication."
  ],
  "key_features": [
    "Patient registration with emergency contact validation.",
    "User login and multi-role authentication for patients, doctors, admin, and nurses.",
    "Appointment booking and management supporting scheduled and walk-in appointments with validation rules.",
    "Weekly doctor availability scheduling with a 15 appointment per day limit.",
    "Real-time queue status tracking and FIFO-based consultation order management.",
    "Digital check-in via unique QR codes generated per doctor appointments.",
    "Automated notifications and reminders for appointments, payments, emergencies, and announcements.",
    "Admin panel with performance statistics, user management, and emergency handling.",
    "Patient medical form submission online before visits for faster reception processing.",
    "Patient feedback and rating system to evaluate doctors and clinic services.",
    "Consultation management supporting start and end controls by nurses.",
    "Optional online payment integration after appointment booking.",
    "Announcement section for admins to broadcast important news to users."
  ],
  "user_flow_summary": [
    "Patient registers or logs into the system using email and password.",
    "Patient browses doctors and views available appointment slots.",
    "Patient books one or multiple appointments, receives confirmation and unique QR codes.",
    "Patient receives appointment reminders and notifications regarding status or emergencies.",
    "Upon clinic arrival, patient digitally checks in by scanning QR code at reception.",
    "Queue system tracks patient status and position, notifying them in real time.",
    "Nurse or doctor starts and ends consultation, updating patient status accordingly.",
    "Patient optionally submits feedback and ratings after consultation.",
    "Admins manage user registrations, monitor system statistics, handle emergencies, and send announcements.",
    "Doctors view their schedules, patient appointments, and submitted medical forms for consultation preparation."
  ],
  "validation_criteria": [
    "Appointments cannot be booked for past dates or exceed daily limits per doctor and specialization.",
    "Each patient may only have one appointment per specialization per day.",
    "Doctor schedules must respect a maximum of 15 appointments daily and availability times.",
    "Walk-in appointments are automatically checked in by the system.",
    "Emergency contact numbers must validate as starting with 091, 092, 093, or 094 followed by 7 digits.",
    "Notifications must be delivered reliably with retries on failure and support multi-channel delivery (in-app, email, SMS).",
    "QR codes must be uniquely generated and linked correctly to appointment data.",
    "All form submissions must have required fields completed, with automatic draft saving and validation.",
    "User authentication and permissions must be enforced for access to features.",
    "System must handle unexpected emergencies by rescheduling or prioritizing patients and notifying affected users.",
    "The system shall maintain performance with at least 1000 concurrent users and scale to 15,000 registered patients.",
    "Uptime must be 99.9% with secure data protection and easy usability for patients and staff."
  ],
  "code_summary": {
    "project_name": "CAQM",
    "description": "Clinic Appointment and Queue Management system - A Django web application for managing clinic operations including patient appointments, doctor schedules, and waiting queues",
    "tech_stack": {
      "framework": "Django 5.0.14",
      "language": "Python 3.10+",
      "database": "SQLite3",
      "testing": "pytest",
      "additional_libraries": [
        "Pillow (image processing)",
        "qrcode (QR code generation)",
        "mysqlclient (MySQL support)"
      ]
    },
    "apps": {
      "accounts": {
        "description": "User authentication and custom user model",
        "models": [
          "User (custom AUTH_USER_MODEL)"
        ],
        "key_features": [
          "Login",
          "Registration",
          "User management",
          "Notifications"
        ]
      },
      "patients": {
        "description": "Patient profile and medical form management",
        "models": [
          "Patient",
          "PatientForm"
        ],
        "key_features": [
          "Patient profile with emergency contact validation",
          "Medical history forms submission",
          "View submitted forms"
        ],
        "services": [
          "PatientFormService"
        ]
      },
      "doctors": {
        "description": "Doctor profiles and availability scheduling",
        "models": [
          "Doctor",
          "DoctorAvailability"
        ],
        "key_features": [
          "Doctor profiles with specializations (Cardiology, Dermatology, Neurology, Orthopedics, Pediatrics, Psychiatry, General)",
          "Weekly availability scheduling",
          "Available time slot calculation",
          "15 appointments per day limit"
        ],
        "services": [
          "ScheduleService"
        ]
      },
      "appointments": {
        "description": "Appointment booking and management with Factory Method pattern",
        "models": [
          "Appointment"
        ],
        "key_features": [
          "Scheduled appointments",
          "Walk-in appointments (auto checked-in)",
          "Appointment statuses (SCHEDULED, CHECKED_IN, IN_PROGRESS, COMPLETED, CANCELLED, NO_SHOW)",
          "Validation rules (no past dates, one appointment per specialization per day, max 15 per doctor per day)",
          "Appointment modification and cancellation",
          "Available slot checking"
        ],
        "services": [
          "AppointmentService"
        ],
        "design_patterns": [
          "Factory Method (AppointmentCreator, ScheduledAppointmentCreator, WalkInAppointmentCreator)",
          "Singleton (SingletonConfig)"
        ]
      },
      "queues": {
        "description": "Patient queue management",
        "key_features": [
          "Queue tracking",
          "Patient notifications"
        ]
      },
      "admins": {
        "description": "Administrative functions",
        "key_features": [
          "System oversight",
          "User management",
          "Record maintenance"
        ]
      },
      "nurses": {
        "description": "Nurse-specific functionality",
        "key_features": [
          "Patient queue management"
        ]
      }
    },
    "existing_tests": {
      "appointments": [
        "test_appointment_creators.py - Tests for Factory Method pattern creators",
        "test_model_validations.py - Tests for Appointment model validation rules",
        "test_service_exceptions.py - Tests for AppointmentService exception handling",
        "conftest.py - Pytest fixtures"
      ],
      "doctors": [
        "test_additional.py",
        "test_permissions.py",
        "test_scheduling.py",
        "test_viewing.py",
        "conftest.py"
      ],
      "patients": [
        "test_additional.py",
        "test_booking.py",
        "test_management.py",
        "test_permissions.py",
        "test_viewing.py",
        "conftest.py"
      ]
    },
    "key_business_rules": [
      "Cannot book appointments in the past",
      "Patient can only have one appointment per specialization per day",
      "Doctor limited to 15 appointments per day",
      "Unique constraint on (doctor, appointment_date, start_time)",
      "Walk-in appointments automatically set to CHECKED_IN status",
      "Scheduled appointments start with SCHEDULED status",
      "Emergency contact must match format: 091/092/093/094 followed by 7 digits"
    ]
  }
}
